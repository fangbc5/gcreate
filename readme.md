# genapi系统设计v1.0

## 系统概述：

​	设计一个能够实现后端服务、接口、业务流程、数据库操作等一些列支撑业务的流程都能够通过平台操作完成，完全不用写代码。业务也通过配置来完成的系统，配置好直接可以启动成一个服务，配置的接口直接可以对外提供服务。

## 解决常见系统痛点问题

1. 减少编码bug，每个具体的动作流程需要经过测试后才可保存
2. 解决不知道接口的业务流程问题，可视化接口流程
3. 系统大了不知道有多少接口，做新接口不知道系统中那些流程可以复用。
4. 将整个系统中的各个流程都可视化，可查询。尽量不出现开发因不知道别人写过相同接口，而重复编写问题。
5. 降低新建应用的成本，一旦接口和流程库完善。几乎新建应用只需要简单配置相应接口即可，并且运行稳定。

## 功能概述

### 应用模块

描述：管理所有的应用，应用可以抽象为接口的集合，应用的主要作用是对外提供接口服务。应用可以关联不同的接口从而实现动态的增加或减少该应用的功能。如果有丰富的接口那么应用只需要关联不同的接口便可以实现不同的功能。创建应用就想拼积木一样，选择自己需要的接口就能组装成你想要的应用

基本功能：

- 新增
- 删除
- 修改
- 查询（条件+分页）
- 配置接口（应用与接口多对多）

- 应用生成（生成可直接启动项目，并对外提供配置的接口服务）

其他功能：

- 服务启停
- 健康检查
- 服务注册
- 动态配置
- 一键部署
- 环境切换

### 接口模块

#### 描述

管理所有的接口供应用来使用，接口类似与三层架构中的控制器controller，每个接口实现不同的功能。抽象的接口是用来实现业务流程的，是业务主流程的一个集合。与业务主流程多对多，提高主流程的复用性，可选择相应的主流程拼接出想要的接口，避免ctrl+c、ctrl+v。每个业务主流程定义为一个事务操作。

#### 基本功能

- 新增
- 删除
- 修改
- 查询（条件+分页）
- 配置子流程（接口与子流程多对多）
- 查看该接口的所有主流程

#### 其他功能

- 单元测试
- 性能测试
- 出入参查询

### 流程管理模块

#### 主流程管理

##### 描述

业务主流程是组成接口的单元，类似与三层架构中的service，每个主流程为一个事务操作。主流程按照排序依次进行调用。一个主流程抽象为业务子流程的集合，由子流程去做具体的操作（如dao、dco、rpc、msg），主流程与子流程之间为多对多关系，每一个子流程都可复用。

##### 基本功能

- 新增
- 删除
- 修改
- 查询（条件+分页）
- 关联子流程

##### 其他功能

- 单元测试
- 性能测试
- 出入参查询

#### 子流程管理

##### 描述

业务子流程是具体做事情的模块，是组成主流程的单元。每个子流程应该关联一个具体的动作流程，完成一项具体的动作。

##### 基本功能

- 新增
- 删除
- 修改
- 查询（条件+分页）
- 关联具体动作流程模块（数据访问dao、数据转换dco、过程调用rpc、异步消息msg）

##### 其他功能

- 单元测试
- 性能测试
- 出入参查询

### 动作流程模块

#### 数据访问配置

##### 描述

执行具体的dao操作

##### 基本功能

- 新增
- 删除
- 修改
- 查询（条件+分页）
- 关联元数据
- 配置元数据自动生成crud（单表、一对一、一对多、多对多）

##### 其他功能

- 支持手动配置sql，实现复杂的功能（保存时对sql进行执行测试，保证无bug）

#### 数据转换配置

##### 描述

执行具体的dco操作

##### 基本功能

- 新增
- 删除
- 修改
- 查询（条件+分页）
- 关联元数据、关联任何领域模型、基本数据类型、字符串、集合

##### 其他功能

- 支持配置Java或golang语言的方法，实现复杂的功能（保存时对方法进行测试，保证无bug）

#### RPC接口管理

##### 描述

执行具体的rpc操作

#### MSG接口管理

##### 描述

执行具体的msg异步消息操作

### 领域模型模块

#### 元数据模型（metadata）

对应相关表结构的模型

#### 视图模型（metavo）

返回给视图的模型

#### 数据传输对象（metadto）

rpc、msg操作用于数据传输

#### 业务对象（metabo）

用于dco操作的模型

#### 模型转换功能

一般使用beanutil或json或map进行领域模型相互转换。

#### 通用模型

##### 基本响应消息

```json
{
    "code": 200,
    "msg": "ok",
    "data": {}
}
```

##### 分页请求/响应

请求

```json
{
    "page": 200,
    "size": "ok",
    "params":  {}
}
```

响应

```
{
    "code": 200,
    "msg": "ok",
    "data": {
    	total: 1234,
    	pages: 10,
    	list: []
    }
}
```

## 详细设计

## 数据库设计

