# genapi系统设计

## 系统概述：

​	设计一个能够实现后端服务、接口、业务流程、数据库操作等一些列支撑业务的流程都能够通过平台操作完成，完全不用写代码。业务也通过配置来完成的系统，配置好直接可以启动成一个服务，配置的接口直接可以对外提供服务。



## 系统使用流程

1. 配置应用
2. 配置接口
3. 根据接口的参数，设计元数据和表结构
4. 根据接口的参数，设计视图模型
5. 配置接口的主流程 (类似于service层，每个主流程是一个事务操作)
6. 配置每个主流程下的子流程。（类似于dao层，但不局限于dao操作，还包含数据处理操作dco、服务调用rpc或mq等）
7. 配置具体的动作流程（valid数据校验、dao数据访问、dco数据转换操作、rpc服务调用、mq服务异步调用）
8. 根据具体的动作流程配置相关的元数据（valid = input-params、dao = metadata，dco = metavo，rpc/mq = metadto）
9. 启动发布接口
10. 发布应用



## 系统实现



1. 读取配置信息、连接数据库

2. 应用code查询应用

3. 读取应用下的所有接口，动态生成接口

   接口名（路由）

4. 根据接口生成路由信息、生成接口处理器handler

5. 查询每个接口下的业务主流程

6. 根据业务主流程，动态生成接口处理器中的每个主流程（service）

7. 查询每个主流程下的子流程

8. 根据业务子流程，动态生成接口主流程中的每个子流程（action）

9. 根据每个action生成相应的方法（valid数据校验、dao数据访问、dco数据转换操作、rpc服务调用、mq服务异步调用）

10. 调用每个action方法处理数据

11. 返回接口定义的output_params